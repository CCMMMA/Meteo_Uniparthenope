<Page actionBarHidden="true" xmlns="http://schemas.nativescript.org/tns.xsd" xmlns:sd="nativescript-ui-sidedrawer" loaded="pageLoaded" xmlns:lv="nativescript-ui-autocomplete">
    <ActionBar title="MeteoUniparthenope"/>

    <sd:RadSideDrawer id="sideDrawer">
        <sd:RadSideDrawer.drawerContent>
            <ScrollView>
                <StackLayout class="white_background">
                    <Image src="~/images/logo.png" margin="5 5 5 5" horizontalAlignment="center"></Image>
                    <Label text="Selezionare data: " verticalAlignment="center" horizontalAlignment="left" style=" flex-grow:1; font-size: 18" marginLeft="15" marginTop="20"/>
                    <DatePicker class="blue_col" id="datePicker" loaded="onDatePickerLoaded" date="{{ date_pick }}" minDate="{{ minDate }}" maxDate="{{ maxDate }}"></DatePicker>
                    <StackLayout margin="0 20 0 20" height="4px" backgroundColor="rgba(30,76,117,1)" marginBottom="20" />
                    <Label text="Impostazioni" tap="onTapSettings" verticalAlignment="center" horizontalAlignment="left" style=" flex-grow:1; font-size: 18" marginLeft="15" marginBottom="15" />
                    <Label text="Info" tap="onTapInfo" verticalAlignment="center" horizontalAlignment="left" style="flex-grow:1; font-size: 18" marginLeft="15"/>
                </StackLayout>
            </ScrollView>
        </sd:RadSideDrawer.drawerContent>

        <sd:RadSideDrawer.mainContent>
            <StackLayout>
                <GridLayout rows="*,auto" columns="*" verticalAlignment="top" width="100%" height="100%">
                    <ContentView row="0" col="0" rowSpan="3" class="map">
                        <web-view id="webView"></web-view>
                    </ContentView>

                    <StackLayout height="30" orientation="vertical" verticalAlignment="center" horizontalAlignment="left" tap="toggleDrawer">
                        <Image src="~/images/arrow.png"></Image>
                    </StackLayout>

                    <StackLayout class="blue_background" marginLeft="10" marginTop="12" orientation="vertical" horizontalAlignment="left" verticalAlignment="top" visibility="{{current_position}}" row="0" col="0" width="220">
                        <StackLayout verticalAlignment="center" horizontalAlignment="center">
                            <Label text="{{ position }}" style="font-weight:bold; flex-grow:1; font-size: 16" margin="5 5 0 5"/>
                        </StackLayout>

                        <StackLayout orientation="horizontal" marginTop="5">
                            <StackLayout orientation="horizontal" verticalAlignment="center" horizontalAlignment="left" height="50" width="70">
                                <Image src="{{ icon }}" height="50" margin="0 10 0 10"/>
                            </StackLayout>
                            <StackLayout orientation="vertical" verticalAlignment="center" horizontalAlignment="right" tap="onTapCenter">

                                <StackLayout horizontalAlignment="center" verticalAlignment="center" orientation="horizontal">
                                    <Label text="{{ temp }}"  style="font-size: 24" horizontalAlignment="left"/>
                                    <Image src="~/images/details_button.png" height="25" marginLeft="40" tap="onTapDetail" horizontalAlignment="right"></Image>
                                </StackLayout>

                              <StackLayout orientation="horizontal" horizontalAlignment="left">
                                    <Label text="{{ wind_direction }}" style="font-weight:bold;" horizontalAlignment="center" verticalAlignment="center" marginRight="10"/>
                                    <Label text="{{ wind }}" horizontalAlignment="center" verticalAlignment="center" />
                                </StackLayout>
                            </StackLayout>
                        </StackLayout>

                        <StackLayout xmlns:lv="nativescript-ui-autocomplete" verticalAlignment="top" horizontalAlignment="center" row="0" col="0" margin="0 10 0 10" width="210">
                            <lv:RadAutoCompleteTextView hint="Ricerca Luogo ..." id="autocomplete" items="{{ posti }}" completionMode="Contains" suggestMode="Suggest" textChanged="onTextChanged" didAutoComplete="didAutoComplete">
                                <lv:RadAutoCompleteTextView.suggestionView>
                                    <lv:SuggestionView suggestionViewHeight="150" class="blue_col">
                                        <lv:SuggestionView.suggestionItemTemplate>
                                            <StackLayout orientation="vertical" padding="10" class="blue_col">
                                                <Label text="{{ text }}"></Label>
                                            </StackLayout>
                                        </lv:SuggestionView.suggestionItemTemplate>
                                    </lv:SuggestionView>
                                </lv:RadAutoCompleteTextView.suggestionView>
                            </lv:RadAutoCompleteTextView>
                        </StackLayout>
                    </StackLayout>

                    <StackLayout class="blue_background" marginLeft="10" marginTop="12" orientation="vertical" horizontalAlignment="left" verticalAlignment="top" visibility="{{search}}" row="0" col="0"  height="50" width="220" tap="onTapCenter">
                        <StackLayout xmlns:lv="nativescript-ui-autocomplete" verticalAlignment="center" horizontalAlignment="center" row="0" col="0" margin="0 10 0 10" width="210">
                            <lv:RadAutoCompleteTextView hint="Ricerca Luogo ..." id="autocomplete" items="{{ posti }}" completionMode="Contains" suggestMode="Suggest" textChanged="onTextChanged" didAutoComplete="didAutoComplete">
                                <lv:RadAutoCompleteTextView.suggestionView>
                                    <lv:SuggestionView suggestionViewHeight="150" class="blue_col">
                                        <lv:SuggestionView.suggestionItemTemplate>
                                            <StackLayout orientation="vertical" padding="10" class="blue_col">
                                                <Label text="{{ text }}"></Label>
                                            </StackLayout>
                                        </lv:SuggestionView.suggestionItemTemplate>
                                    </lv:SuggestionView>
                                </lv:RadAutoCompleteTextView.suggestionView>
                            </lv:RadAutoCompleteTextView>
                        </StackLayout>
                    </StackLayout>

                    <StackLayout margin="0 10 15 10" class="blue_background" horizontalAlignment="center" row="0" col="0" verticalAlignment="bottom" orientation="horizontal" height="50">
                        <Image horizontalAlignment="left" src="~/images/back.png" height="25" margin="10 40 10 10" tap="onTapBack"></Image>
                        <Label verticalAlignment="center" text="{{ data }}"  tap="toggleDrawer"></Label>
                        <Image horizontalAlignment="right" src="~/images/next.png" height="25" margin="10 10 10 40" tap="onTapNext"></Image>
                    </StackLayout>

                </GridLayout>
            </StackLayout>
        </sd:RadSideDrawer.mainContent>
    </sd:RadSideDrawer>

</Page>